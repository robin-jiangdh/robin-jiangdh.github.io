<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-17T23:19:46.9365892"><meta name="build-number" content="${buildNumber}">       <title>MySQL 执行计划 | blog</title><script id="virtual-toc-data" type="application/json">[{"id":"explain_1","level":0,"title":"Explain输出格式","anchor":"#explain_1"},{"id":"2ba11fec_1898","level":0,"title":"获取命名连接的执行计划信息","anchor":"#2ba11fec_1898"},{"id":"2ba11fec_1932","level":0,"title":"估计查询性能","anchor":"#2ba11fec_1932"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="MySQL 执行计划 | blog"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="blog Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/blog/1.0/mysql-2017-01-11-mysql-explain-or-desc.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="MySQL 执行计划 | blog"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/blog/1.0/mysql-2017-01-11-mysql-explain-or-desc.html#webpage", "url": "/blog/1.0/mysql-2017-01-11-mysql-explain-or-desc.html", "name": "MySQL 执行计划 | blog", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/blog/#website", "url": "/blog/", "name": "blog Help" }</script><!-- End Schema.org --></head>      <body data-id="mysql_2017-01-11-mysql-explain-or-desc" data-main-title="MySQL 执行计划" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="post///mysql"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>blog 1.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="mysql_2017-01-11-mysql-explain-or-desc"   id="mysql_2017-01-11-mysql-explain-or-desc.md">MySQL 执行计划</h1>  <aside class="prompt" data-type="tip" data-title="" id="2ba11fec_1778"><p id="2ba11fec_1779">一直在使用Explain，今天被扫盲，专业名词叫执行计划~，野生码农误国啊~</p><p id="2ba11fec_1780"><a href="https://dev.mysql.com/doc/refman/5.7/en/execution-plan-information.html" id="2ba11fec_1781"   data-external="true" rel="noopener noreferrer" >官方文档地址</a></p></aside><p id="2ba11fec_1782">MySQL提供<a href="https://dev.mysql.com/doc/refman/5.7/en/execution-plan-information.html" id="2ba11fec_1783"   data-external="true" rel="noopener noreferrer" ><span class="control" id="2ba11fec_1784">explain/desc</span></a> 命令输出执行计划，我们通过执行计划优化SQL语句</p><aside class="prompt" data-type="tip" data-title="" id="2ba11fec_1785"><p id="2ba11fec_1786">根据表，列，索引的详细信息以及<code class="code" id="2ba11fec_1787">WHERE</code> 子句中的条件，MySQL优化器考虑了许多技术来有效执行SQL查询中涉及的查找。无需读取所有行即可执行对巨大表的查询；可以执行涉及多个表的联接，而无需比较行的每个组合。优化器选择执行最有效查询的一组操作称为&ldquo; 查询执行计划 &rdquo;，也称为 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1788"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1789">EXPLAIN</code></a> 计划。您的目标是认识到 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1790"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1791">EXPLAIN</code></a> 表示查询优化的计划，如果发现一些低效的操作，则可以学习SQL语法和索引技术来改进计划。</p></aside><p id="2ba11fec_1792">该<a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1793"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1794">EXPLAIN</code></a> 语句提供有关MySQL如何执行语句的信息：</p><ul class="list _ul" id="2ba11fec_1795"><li class="list__item" id="2ba11fec_1796"><p><a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1797"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1798">EXPLAIN</code></a> 作品有 <a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1799"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1800">SELECT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/delete.html" id="2ba11fec_1801"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1802">DELETE</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/insert.html" id="2ba11fec_1803"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1804">INSERT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/replace.html" id="2ba11fec_1805"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1806">REPLACE</code></a> ，和 <a href="https://dev.mysql.com/doc/refman/5.7/en/update.html" id="2ba11fec_1807"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1808">UPDATE</code></a> 语句。</p></li><li class="list__item" id="2ba11fec_1809"><p>当<a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1810"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1811">EXPLAIN</code></a> 与可解释的语句一起使用时，MySQL将显示来自优化器的有关语句执行计划的信息。也就是说，MySQL解释了它将如何处理该语句，包括有关如何连接表以及以何种顺序连接表的信息。</p></li><li class="list__item" id="2ba11fec_1812"><p>当<a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1813"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1814">EXPLAIN</code></a> 与 <code class="code" id="2ba11fec_1815">FOR CONNECTION *</code>connection_id<code class="code" id="2ba11fec_1816">*</code> 而不是可解释的语句一起使用时，它将显示在名为这个&ldquo;connetction_id&rdquo;的连接中正在执行的语句的执行计划。</p></li><li class="list__item" id="2ba11fec_1817"><p>对于<a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1818"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1819">SELECT</code></a> 语句， 在<a href="https://dev.mysql.com/doc/refman/5.7/en/show-warnings.html" id="2ba11fec_1820"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1821">SHOW WARNINGS</code></a> 模式下， <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1822"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1823">EXPLAIN</code></a> 可以输出更多的执行计划信息。</p></li><li class="list__item" id="2ba11fec_1824"><p><a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1825"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1826">EXPLAIN</code></a> 对于检查涉及分区表的查询很有用。</p></li><li class="list__item" id="2ba11fec_1827"><p><code class="code" id="2ba11fec_1828">FORMAT</code>选项可用于设置输出格式。 <code class="code" id="2ba11fec_1829">TRADITIONAL</code>以表格格式显示输出。默认情况下不需要提供<code class="code" id="2ba11fec_1830">FORMAT</code>设置 。 format设置为<code class="code" id="2ba11fec_1831">JSON</code> 时，以JSON格式显示信息。</p></li></ul><section class="chapter"><h2 id="explain_1" data-toc="explain_1"   >Explain输出格式</h2><p id="2ba11fec_1832"><a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1833"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1834">EXPLAIN</code></a> 语句提供有关MySQL如何执行语句的信息。 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1835"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1836">EXPLAIN</code></a> 支持 <a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1837"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1838">SELECT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/delete.html" id="2ba11fec_1839"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1840">DELETE</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/insert.html" id="2ba11fec_1841"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1842">INSERT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/replace.html" id="2ba11fec_1843"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1844">REPLACE</code></a> 和 <a href="https://dev.mysql.com/doc/refman/5.7/en/update.html" id="2ba11fec_1845"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1846">UPDATE</code></a> 语句。</p><p id="2ba11fec_1847"><a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1848"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1849">EXPLAIN</code></a> 为<a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1850"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1851">SELECT</code></a> 语句中使用的每个表返回一行信息 。它按照MySQL在处理语句时读取它们的顺序列出了输出中的表。MySQL使用嵌套循环连接方法解析所有连接。这意味着MySQL从第一个表中读取一行，然后在第二个表，第三个表中找到匹配的行，依此类推。处理完所有表后，MySQL将通过表列表输出选定的列和回溯，直到找到一个表，其中存在更多匹配的行。从该表中读取下一行，然后继续下一个表。</p><p id="2ba11fec_1852"><a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1853"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1854">EXPLAIN</code></a> 输出包括分区信息。此外，对于<a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1855"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1856">SELECT</code></a> 语句， <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1857"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1858">EXPLAIN</code></a> 产生可与被显示扩展信息 <a href="https://dev.mysql.com/doc/refman/5.7/en/show-warnings.html" id="2ba11fec_1859"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1860">SHOW WARNINGS</code></a> 之后的 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1861"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1862">EXPLAIN</code></a></p><section class="chapter"><h3 id="explain" data-toc="explain"   >扩展的EXPLAIN输出格式</h3><p id="2ba11fec_1863">对于<a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1864"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1865">SELECT</code></a> 语句，该 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1866"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1867">EXPLAIN</code></a> 语句会产生额外的（&ldquo; 扩展 &rdquo;）信息，这些信息不属于 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1868"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1869">EXPLAIN</code></a> 输出，但可以通过在<a href="https://dev.mysql.com/doc/refman/5.7/en/show-warnings.html" id="2ba11fec_1870"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1871">SHOW WARNINGS</code></a> 以下语句发出来查看<a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1872"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1873">EXPLAIN</code></a> 。输出中的 <code class="code" id="2ba11fec_1874">Message</code> 值<a href="https://dev.mysql.com/doc/refman/5.7/en/show-warnings.html" id="2ba11fec_1875"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1876">SHOW WARNINGS</code></a> 显示优化器如何限定<a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1877"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1878">SELECT</code></a> 语句 中的表名和列名， <a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1879"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1880">SELECT</code></a> 应用重写和优化规则后的外观以及有关优化过程的其他注释。</p><p id="2ba11fec_1881">可在<a href="https://dev.mysql.com/doc/refman/5.7/en/show-warnings.html" id="2ba11fec_1882"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1883">SHOW WARNINGS</code></a> 语句后面 显示的扩展信息 <a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1884"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1885">EXPLAIN</code></a> 仅针对 <a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1886"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1887">SELECT</code></a> 语句生成。 <a href="https://dev.mysql.com/doc/refman/5.7/en/show-warnings.html" id="2ba11fec_1888"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1889">SHOW WARNINGS</code></a> 显示其他可解释语句空结果（<a href="https://dev.mysql.com/doc/refman/5.7/en/delete.html" id="2ba11fec_1890"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1891">DELETE</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/insert.html" id="2ba11fec_1892"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1893">INSERT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/replace.html" id="2ba11fec_1894"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1895">REPLACE</code></a> ，和 <a href="https://dev.mysql.com/doc/refman/5.7/en/update.html" id="2ba11fec_1896"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1897">UPDATE</code></a>）。</p></section></section><section class="chapter"><h2 id="2ba11fec_1898" data-toc="2ba11fec_1898"   >获取命名连接的执行计划信息</h2><div class="code-block" data-lang="none"         >
EXPLAIN [options] FOR CONNECTION connection_id;
</div><p id="2ba11fec_1900"><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-for-connection.html" id="2ba11fec_1901"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1902">EXPLAIN FOR CONNECTION</code></a> 返回<a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1903"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1904">EXPLAIN</code></a> 当前在给定连接中用于执行查询的信息。由于数据（和支持统计数据）的更改，它可能会产生与<a href="https://dev.mysql.com/doc/refman/5.7/en/explain.html" id="2ba11fec_1905"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1906">EXPLAIN</code></a> 在等效查询文本上运行不同的结果 。行为上的这种差异对于诊断更多瞬时性能问题很有用。例如，如果您在一个需要很长时间才能完成的会话中运行语句，则<a href="https://dev.mysql.com/doc/refman/5.7/en/explain-for-connection.html" id="2ba11fec_1907"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1908">EXPLAIN FOR CONNECTION</code></a> 在另一会话中使用该语句可能会产生有关延迟原因的有用信息。</p><p id="2ba11fec_1909"><span class="emphasis" id="2ba11fec_1910"><code class="code" id="2ba11fec_1911">connection_id</code></span> 是从<code class="code" id="2ba11fec_1912">INFORMATION_SCHEMA</code> <a href="https://dev.mysql.com/doc/refman/5.7/en/processlist-table.html" id="2ba11fec_1913"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1914">PROCESSLIST</code></a> 表或 <a href="https://dev.mysql.com/doc/refman/5.7/en/show-processlist.html" id="2ba11fec_1915"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1916">SHOW PROCESSLIST</code></a> 语句获得的连接标识符 。如果有<a href="https://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html#priv_process" id="2ba11fec_1917"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1918">PROCESS</code></a> 特权，则可以为任何连接指定标识符。否则，您只能为自己的连接指定标识符。</p><p id="2ba11fec_1919">如果命名连接未执行语句，则结果为空。否则， <code class="code" id="2ba11fec_1920">EXPLAIN FOR CONNECTION</code> 仅当在命名连接中执行的语句是可解释的时才适用。这包括 <a href="https://dev.mysql.com/doc/refman/5.7/en/select.html" id="2ba11fec_1921"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1922">SELECT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/delete.html" id="2ba11fec_1923"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1924">DELETE</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/insert.html" id="2ba11fec_1925"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1926">INSERT</code></a>， <a href="https://dev.mysql.com/doc/refman/5.7/en/replace.html" id="2ba11fec_1927"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1928">REPLACE</code></a> ，和 <a href="https://dev.mysql.com/doc/refman/5.7/en/update.html" id="2ba11fec_1929"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1930">UPDATE</code></a> 。（但是， <code class="code" id="2ba11fec_1931">EXPLAIN FOR CONNECTION</code> 不适用于预备语句，甚至不适用于这些类型的预备语句。）</p></section><section class="chapter"><h2 id="2ba11fec_1932" data-toc="2ba11fec_1932"   >估计查询性能</h2><p id="2ba11fec_1933">在大多数情况下，您可以通过计算磁盘搜索次数来估计查询性能。对于小型表，通常可以在一个磁盘搜索中找到一行（因为索引可能已缓存）。对于更大的表，您可以估计，使用B树索引，您需要进行许多查找才能找到行： 。 <code class="code" id="2ba11fec_1934">log(*</code> row_count<code class="code" id="2ba11fec_1935">*) / log(*</code>index_block_length<code class="code" id="2ba11fec_1936">* / 3 * 2 / (*</code>index_length<code class="code" id="2ba11fec_1937">* + *</code>data_pointer_length<code class="code" id="2ba11fec_1938">*)) + 1</code></p><p id="2ba11fec_1939">在MySQL中，索引块通常为1,024字节，数据指针通常为四个字节。对于一个键值长度为三个字节（大小为<a href="https://dev.mysql.com/doc/refman/5.7/en/integer-types.html" id="2ba11fec_1940"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1941">MEDIUMINT</code></a> ）的500,000行表 ，该公式表示 <code class="code" id="2ba11fec_1942">log(500,000)/log(1024/3*2/(3+4)) + 1</code>=搜索 <code class="code" id="2ba11fec_1943">4</code>。</p><p id="2ba11fec_1944">该索引将需要大约500,000 * 7 * 3/2 = 5.2MB的存储空间（假设典型的索引缓冲区填充率为2/3），因此您可能在内存中拥有很多索引，因此只需要一个或两个调用即可读取数据以查找行。</p><p id="2ba11fec_1945">但是，对于写操作，您需要四个搜索请求来查找在何处放置新索引值，通常需要两个搜索来更新索引并写入行。</p><p id="2ba11fec_1946">前面的讨论并不意味着您的应用程序性能会因log缓慢下降 <span class="emphasis" id="2ba11fec_1947"><code class="code" id="2ba11fec_1948">N</code></span> 。只要所有内容都由OS或MySQL服务器缓存，随着表的增加，事情只会变得稍微慢一些。在数据变得太大而无法缓存之后，事情开始变得缓慢得多，直到您的应用程序仅受磁盘搜索约束（随日志增长 <span class="emphasis" id="2ba11fec_1949"><code class="code" id="2ba11fec_1950">N</code></span> ）。为避免这种情况，请随着数据的增长而增加密钥缓存的大小。对于<code class="code" id="2ba11fec_1951">MyISAM</code> 表，键缓存大小由<a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_key_buffer_size" id="2ba11fec_1952"   data-external="true" rel="noopener noreferrer" ><code class="code" id="2ba11fec_1953">key_buffer_size</code></a> 系统变量控制</p></section><div class="last-modified"> Last modified: 17 十二月 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="mysql-2018-04-11-mysql-index-optimization.html">索引优化原则</a>   <a class="navigation-links__next" href="mysql-2016-01-15-mysql-index.html">MySQL索引原理</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>