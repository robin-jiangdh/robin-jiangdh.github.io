<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-17T22:54:23.4103123"><meta name="build-number" content="${buildNumber}">       <title>ClickHouse versions | blog</title><script id="virtual-toc-data" type="application/json">[{"id":"clickhouse-versions-linktitle-clickhouse-versions-description-clickhouse-versions","level":0,"title":"#ClickHouse versions\nlinkTitle: \"ClickHouse versions\"\ndescription: \u003e\nClickHouse versions","anchor":"#clickhouse-versions-linktitle-clickhouse-versions-description-clickhouse-versions"},{"id":"clickhouse-versioning-schema","level":0,"title":"ClickHouse versioning schema","anchor":"#clickhouse-versioning-schema"},{"id":"how-do-i-upgrade","level":0,"title":"How do I upgrade?","anchor":"#how-do-i-upgrade"},{"id":"bugs","level":0,"title":"Bugs?","anchor":"#bugs"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="ClickHouse versions | blog"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="blog Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/1.0/kb-setup-and-maintenance-clickhouse-versions.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="ClickHouse versions | blog"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/1.0/kb-setup-and-maintenance-clickhouse-versions.html#webpage", "url": "/1.0/kb-setup-and-maintenance-clickhouse-versions.html", "name": "ClickHouse versions | blog", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "blog Help" }</script><!-- End Schema.org --></head>      <body data-id="kb-setup-and-maintenance_clickhouse-versions" data-main-title="ClickHouse versions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Clickhouse///kb-setup-and-maintenance"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>blog 1.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="kb-setup-and-maintenance_clickhouse-versions"   id="kb-setup-and-maintenance_clickhouse-versions.md">ClickHouse versions</h1>  <section class="chapter"><h2 id="clickhouse-versions-linktitle-clickhouse-versions-description-clickhouse-versions" data-toc="clickhouse-versions-linktitle-clickhouse-versions-description-clickhouse-versions"   >#ClickHouse versions
linkTitle: &quot;ClickHouse versions&quot;
description: &gt;
ClickHouse versions</h2></section><section class="chapter"><h2 id="clickhouse-versioning-schema" data-toc="clickhouse-versioning-schema"   >ClickHouse versioning schema</h2><figure  id="1d4c972d_358"><img alt="ClickHouse Version Breakdown" src="images/illyustraciya_bez_nazvaniya.png" title="ClickHouse Version Breakdown"  width="2048" height="2048"></figure><p id="1d4c972d_359">Example:</p><p id="1d4c972d_360">21.3.10.1-lts</p><ol class="list _decimal" id="1d4c972d_361" type="1"><li class="list__item" id="1d4c972d_362"><p>21 is the year of release.</p></li><li class="list__item" id="1d4c972d_363"><p>3 indicates a Feature Release. This is an increment where features are delivered.</p></li><li class="list__item" id="1d4c972d_364"><p>10 is the bugfix / maintenance version. When that version is incremented it means that some bugs was fixed comparing to 21.3.9.</p></li><li class="list__item" id="1d4c972d_365"><p>1 - build number, means nothing for end users.</p></li><li class="list__item" id="1d4c972d_366"><p>lts - type of release. (long time support).</p></li></ol><section class="chapter"><h3 id="what-is-robin-stable-version" data-toc="what-is-robin-stable-version"   >What is Robin Stable version?</h3><p id="1d4c972d_367">It is one of general / public version of ClickHouse which has passed some extra testings, the upgrade path and changelog was analyzed, known issues are documented, and at least few big companies use it on production. All those things take some time, so usually that means that Robin Stable is always a 'behind' the main releases.</p><p id="1d4c972d_368">Robin version - is an option for conservative users, who prefer bit older but better known things.</p><p id="1d4c972d_369">Usually there is no reason to use version older than Robin Stable. If you see that new Robin Version arrived and you still use some older version - you should for sure consider an upgrade.</p><p id="1d4c972d_370">Additionally for Robin client we provide extra support for those version for a longer time (and we also support newer versions).</p></section><section class="chapter"><h3 id="which-version-should-i-use" data-toc="which-version-should-i-use"   >Which version should I use?</h3><p id="1d4c972d_371">We recommend the following approach:</p><ol class="list _decimal" id="1d4c972d_372" type="1"><li class="list__item" id="1d4c972d_373"><p>When you start using ClickHouse and before you go on production - pick the latest stable version.</p></li><li class="list__item" id="1d4c972d_374"><p>If you already have ClickHouse running on production: </p><ol class="list _decimal" id="1d4c972d_375" type="1"><li class="list__item" id="1d4c972d_376"><p>Check all the new queries / schemas on the staging first, especially if some new ClickHouse features are used.</p></li><li class="list__item" id="1d4c972d_377"><p>Do minor (bugfix) upgrades regularly: monitor new maintenance releases of the feature release you use.</p></li><li class="list__item" id="1d4c972d_378"><p>When considering upgrade - check <a href="https://docs.Robinjiang.com/Robinstablerelease/" id="1d4c972d_379"   data-external="true" rel="noopener noreferrer" >Robin Stable release docs</a>, if you want to use newer release - analyze changelog and known issues.</p></li><li class="list__item" id="1d4c972d_380"><p>Check latest stable or test versions of ClickHouse on your staging environment regularly and pass the feedback to us or on the <a href="https://github.com/ClickHouse/ClickHouse" id="1d4c972d_381"   data-external="true" rel="noopener noreferrer" >official ClickHouse github</a>.</p></li><li class="list__item" id="1d4c972d_382"><p>Consider blue/green or canary upgrades.</p></li></ol></li></ol><p id="1d4c972d_383">See also: <a href="https://clickhouse.tech/docs/en/faq/operations/production/" id="1d4c972d_384"   data-external="true" rel="noopener noreferrer" >https://clickhouse.tech/docs/en/faq/operations/production/</a></p></section></section><section class="chapter"><h2 id="how-do-i-upgrade" data-toc="how-do-i-upgrade"   >How do I upgrade?</h2><p id="1d4c972d_385">Check upgrade / downgrade scenario on staging first.</p><ol class="list _decimal" id="1d4c972d_386" type="1"><li class="list__item" id="1d4c972d_387"><p>check if you need to adjust some settings / to opt-out some new features you don't need (maybe needed to to make the downgrade path possible, or to make it possible for 2 versions to work together).</p></li><li class="list__item" id="1d4c972d_388"><p><a href="https://docs.Robinjiang.com/Robinstablerelease/stablequickstartguide/" id="1d4c972d_389"   data-external="true" rel="noopener noreferrer" >upgrade packages</a> on odd replicas</p></li><li class="list__item" id="1d4c972d_390"><p>(if needed / depends on use case) stop ingestion into odd replicas / remove them for load-balancer etc.</p></li><li class="list__item" id="1d4c972d_391"><p>restart clickhouse-server service on odd replicas.</p></li><li class="list__item" id="1d4c972d_392"><p>once odd replicas will go back online - repeat the same procedure on the even replicas.</p></li></ol><p id="1d4c972d_393">In some upgrade scenarios (depending from which version to which you do upgrate) when differerent replicas use different clickhouse versions you may see following issues:</p><ol class="list _decimal" id="1d4c972d_394" type="1"><li class="list__item" id="1d4c972d_395"><p>the replication don't work at all and delays grow.</p></li><li class="list__item" id="1d4c972d_396"><p>errors about 'checksum mismatch' and traffic between replicase increase (they need to resync merge results).</p></li></ol><p id="1d4c972d_397">Both problems will go away once all replicas will be upgraded.</p></section><section class="chapter"><h2 id="bugs" data-toc="bugs"   >Bugs?</h2><p id="1d4c972d_398">ClickHouse development process goes in a very high pace and has already thousands of features. CI system doing tens of thousands of tests (including tests with different sanitizers) against every commit.</p><p id="1d4c972d_399">All core features are well-tested, and very stable, and code is high-quality. But as with any other software bad things may happen. Usually the most of bugs happens in the new, freshly added functionality, and in some complex combination of several features (of course all possible combinations of features just physically can&rsquo;t be tested). Usually new features are adopted by the community and stabilize quickly.</p><section class="chapter"><h3 id="what-should-i-do-if-i-found-a-bug-in-clickhouse" data-toc="what-should-i-do-if-i-found-a-bug-in-clickhouse"   >What should I do if I found a bug in clickhouse?</h3><ol class="list _decimal" id="1d4c972d_400" type="1"><li class="list__item" id="1d4c972d_401"><p>First of all: try to upgrade to the latest bugfix release Example: if you use v21.3.5.42-lts but you know that v21.3.10.1-lts already exists - start with upgrade to that. Upgrades to latest maintenance releases are smooth and safe.</p></li><li class="list__item" id="1d4c972d_402"><p>Look for similar issues in github. Maybe the fix is on the way.</p></li><li class="list__item" id="1d4c972d_403"><p>If you can reproduce the bug: try to isolate it - remove some pieces of query one-by-one / simplify the scenario until the issue still reproduces. This way you can figure out which part is responsible for that bug, and you can try to create <a href="https://stackoverflow.com/help/minimal-reproducible-example" id="1d4c972d_404"   data-external="true" rel="noopener noreferrer" >minimal reproducible example</a></p></li><li class="list__item" id="1d4c972d_405"><p>Once you have minimal reproducible example: </p><ol class="list _decimal" id="1d4c972d_406" type="1"><li class="list__item" id="1d4c972d_407"><p>report it to github (or to Robin Support)</p></li><li class="list__item" id="1d4c972d_408"><p>check if it reproduces on newer clickhouse versions</p></li></ol></li></ol></section></section><div class="last-modified"> Last modified: 17 十二月 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="kb-setup-and-maintenance-connection-problems.html">Can not connect to my ClickHouse server</a>   <a class="navigation-links__next" href="kb-setup-and-maintenance-clickhouse-operator.html">ClickHouse operator</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>