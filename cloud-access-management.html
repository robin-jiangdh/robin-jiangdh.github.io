<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-17T23:19:47.7685013"><meta name="build-number" content="${buildNumber}">       <title>Robin Cloud Access Management | blog</title><script id="virtual-toc-data" type="application/json">[{"id":"robin-cloud-access-management-linktitle-robin-cloud-access-management-description-enabling-access-management-for-robin-cloud-databases-weight-5","level":0,"title":"#Robin Cloud Access Management\nlinkTitle: \"Robin Cloud Access Management\"\ndescription: \u003e\nEnabling access_management for Robin.Cloud databases.\nweight: 5","anchor":"#robin-cloud-access-management-linktitle-robin-cloud-access-management-description-enabling-access-management-for-robin-cloud-databases-weight-5"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Robin Cloud Access Management | blog"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="blog Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/blog/1.0/cloud-access-management.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Robin Cloud Access Management | blog"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/blog/1.0/cloud-access-management.html#webpage", "url": "/blog/1.0/cloud-access-management.html", "name": "Robin Cloud Access Management | blog", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/blog/#website", "url": "/blog/", "name": "blog Help" }</script><!-- End Schema.org --></head>      <body data-id="cloud-access-management" data-main-title="Robin Cloud Access Management" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Clickhouse///kb-integrations///cloud"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>blog 1.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="cloud-access-management"   id="cloud-access-management.md">Robin Cloud Access Management</h1>  <section class="chapter"><h2 id="robin-cloud-access-management-linktitle-robin-cloud-access-management-description-enabling-access-management-for-robin-cloud-databases-weight-5" data-toc="robin-cloud-access-management-linktitle-robin-cloud-access-management-description-enabling-access-management-for-robin-cloud-databases-weight-5"   >#Robin Cloud Access Management
linkTitle: &quot;Robin Cloud Access Management&quot;
description: &gt;
Enabling access_management for Robin.Cloud databases.
weight: 5</h2><p id="6054c869_487">Organizations that want to enable administrative users in their Robin.Cloud ClickHouse servers can do so by enabling <code class="code" id="6054c869_488">access_management</code> manually. This allows for administrative users to be created on the specific ClickHouse Cluster.</p><p id="6054c869_489">Modifying the ClickHouse cluster settings manually can lead to the cluster not loading or other issues. Change settings only with full consultation with an Robin.Cloud support team member, and be ready to remove settings if they cause any disruption of service.</p><p id="6054c869_490">To add the <code class="code" id="6054c869_491">access_management</code> setting to an Robin.Cloud ClickHouse Cluster:</p><ol class="list _decimal" id="6054c869_492" type="1"><li class="list__item" id="6054c869_493"><p id="6054c869_494">Log into your Robin.Cloud account.</p></li><li class="list__item" id="6054c869_495"><p id="6054c869_496">For the cluster to modify, select <span class="control" id="6054c869_497">Configure -&gt; Settings</span>.</p><p id="6054c869_498">{{&lt; figure src=&quot;/assets/Robin-cloud-cluster-settings-configure.png&quot; width=&quot;400&quot; title=&quot;Cluster setting configure&quot; &gt;}}</p></li><li class="list__item" id="6054c869_499"><p id="6054c869_500">From the Settings page, select <span class="control" id="6054c869_501">+ADD SETTING</span>.</p><p id="6054c869_502">{{&lt; figure src=&quot;/assets/Robin-cloud-cluster-add-setting.png&quot; title=&quot;Add cluster setting&quot; &gt;}}</p></li><li class="list__item" id="6054c869_503"><p id="6054c869_504">Set the following options:</p><ol class="list _decimal" id="6054c869_505" type="1"><li class="list__item" id="6054c869_506"><p id="6054c869_507"><span class="control" id="6054c869_508">Setting Type</span>: Select <span class="control" id="6054c869_509">users.d file</span>.</p></li><li class="list__item" id="6054c869_510"><p id="6054c869_511"><span class="control" id="6054c869_512">Filename</span>: <code class="code" id="6054c869_513">access_management.xml</code></p></li><li class="list__item" id="6054c869_514"><p id="6054c869_515"><span class="control" id="6054c869_516">Contents</span>: Enter the following to allow the <code class="code" id="6054c869_517">clickhouse_operator</code> that controls the cluster through the <code class="code" id="6054c869_518">clickhouse-operator</code> the ability to set administrative options:</p><div class="code-block" data-lang="none"         >
&lt;yandex&gt;
    &lt;users&gt;
        &lt;admin&gt;
            &lt;access_management&gt;1&lt;/access_management&gt;
        &lt;/admin&gt;
        &lt;clickhouse_operator&gt;
            &lt;access_management&gt;1&lt;/access_management&gt;
        &lt;/clickhouse_operator&gt;
    &lt;/users&gt;
&lt;/yandex&gt;
</div></li></ol><p id="6054c869_520">access_management=1 means that users <code class="code" id="6054c869_521">admin</code>, <code class="code" id="6054c869_522">clickhouse_operator</code> are able to create users and grant them privileges using SQL.</p></li><li class="list__item" id="6054c869_523"><p id="6054c869_524">Select <span class="control" id="6054c869_525">OK</span>. The cluster will restart, and users can now be created in the cluster that can be granted administrative access.</p></li><li class="list__item" id="6054c869_526"><p id="6054c869_527">If you are running ClickHouse 21.9 and above you can enable storing access management in ZooKeeper. in this case it will be automatically propagated to the cluster. This requires yet another configuration file:</p><ol class="list _decimal" id="6054c869_528" type="1"><li class="list__item" id="6054c869_529"><p id="6054c869_530"><span class="control" id="6054c869_531">Setting Type</span>: Select <span class="control" id="6054c869_532">config.d file</span></p></li><li class="list__item" id="6054c869_533"><p id="6054c869_534"><span class="control" id="6054c869_535">Filename</span>: <code class="code" id="6054c869_536">user_directories.xml</code></p></li><li class="list__item" id="6054c869_537"><p id="6054c869_538"><span class="control" id="6054c869_539">Contents</span>:</p><div class="code-block" data-lang="none"         >
&lt;yandex&gt;
  &lt;user_directories replace=&quot;replace&quot;&gt;
    &lt;users_xml&gt;
      &lt;path&gt;/etc/clickhouse-server/users.xml&lt;/path&gt;
    &lt;/users_xml&gt;
    &lt;replicated&gt;
      &lt;zookeeper_path&gt;/clickhouse/access/&lt;/zookeeper_path&gt;
    &lt;/replicated&gt;
  &lt;/user_directories&gt;
&lt;/yandex&gt;
</div></li></ol></li></ol></section><div class="last-modified"> Last modified: 17 十二月 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="cloud-index.html">Cloud Services</a>   <a class="navigation-links__next" href="kb-selects-from-engine-kafka.html">SELECTs from engine=Kafka</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>