<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-17T23:19:47.6112523"><meta name="build-number" content="${buildNumber}">       <title>ReplacingMergeTree does not collapse duplicates | blog</title><script id="virtual-toc-data" type="application/json">[{"id":"replacingmergetree-does-not-collapse-duplicates-linktitle-replacingmergetree-does-not-collapse-duplicates-description-replacingmergetree-does-not-collapse-duplicates","level":0,"title":"#ReplacingMergeTree does not collapse duplicates\nlinkTitle: \"ReplacingMergeTree does not collapse duplicates\"\ndescription: \u003e\nReplacingMergeTree does not collapse duplicates","anchor":"#replacingmergetree-does-not-collapse-duplicates-linktitle-replacingmergetree-does-not-collapse-duplicates-description-replacingmergetree-does-not-collapse-duplicates"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="ReplacingMergeTree does not collapse duplicates | blog"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="blog Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/blog/1.0/kb-replacingmergetree-does-not-collapse-duplicates.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="ReplacingMergeTree does not collapse duplicates | blog"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/blog/1.0/kb-replacingmergetree-does-not-collapse-duplicates.html#webpage", "url": "/blog/1.0/kb-replacingmergetree-does-not-collapse-duplicates.html", "name": "ReplacingMergeTree does not collapse duplicates | blog", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/blog/#website", "url": "/blog/", "name": "blog Help" }</script><!-- End Schema.org --></head>      <body data-id="kb-replacingmergetree-does-not-collapse-duplicates" data-main-title="ReplacingMergeTree does not collapse duplicates" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Clickhouse///engines///mergetree-table-engine-family///replacingmergetree"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>blog 1.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="kb-replacingmergetree-does-not-collapse-duplicates"   id="kb-replacingmergetree-does-not-collapse-duplicates.md">ReplacingMergeTree does not collapse duplicates</h1>  <section class="chapter"><h2 id="replacingmergetree-does-not-collapse-duplicates-linktitle-replacingmergetree-does-not-collapse-duplicates-description-replacingmergetree-does-not-collapse-duplicates" data-toc="replacingmergetree-does-not-collapse-duplicates-linktitle-replacingmergetree-does-not-collapse-duplicates-description-replacingmergetree-does-not-collapse-duplicates"   >#ReplacingMergeTree does not collapse duplicates
linkTitle: &quot;ReplacingMergeTree does not collapse duplicates&quot;
description: &gt;
ReplacingMergeTree does not collapse duplicates</h2><p id="cbb05288_81"><span class="control" id="cbb05288_82">Hi there, I have a question about replacing merge trees. I have set up a Materialized View with ReplacingMergeTree table, but even if I call optimize on it, the parts don't get merged. I filled that table yesterday, nothing happened since then. What should I do?</span></p><p id="cbb05288_83">Merges are eventual and may never happen. It depends on the number of inserts that happened after, the number of parts in the partition, size of parts. If the total size of input parts are greater than the maximum part size then they will never be merged.</p><p id="cbb05288_84"><a href="https://clickhouse.tech/docs/en/operations/settings/merge-tree-settings/#max-bytes-to-merge-at-max-space-in-pool" id="cbb05288_85"   data-external="true" rel="noopener noreferrer" >https://clickhouse.tech/docs/en/operations/settings/merge-tree-settings/#max-bytes-to-merge-at-max-space-in-pool</a></p><p id="cbb05288_86"><a href="https://clickhouse.tech/docs/en/engines/table-engines/mergetree-family/replacingmergetree/" id="cbb05288_87"   data-external="true" rel="noopener noreferrer" >https://clickhouse.tech/docs/en/engines/table-engines/mergetree-family/replacingmergetree/</a> <span class="emphasis" id="cbb05288_88">ReplacingMergeTree is suitable for clearing out duplicate data in the background in order to save space, but it doesn&rsquo;t guarantee the absence of duplicates.</span></p></section><div class="last-modified"> Last modified: 17 十二月 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="replacingmergetree-index.html">ReplacingMergeTree</a>   <a class="navigation-links__next" href="security-named-collections.html">Security named collections</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>