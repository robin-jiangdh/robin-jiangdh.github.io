<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-17T23:19:47.039948"><meta name="build-number" content="${buildNumber}">       <title>MySQL | blog</title><script id="virtual-toc-data" type="application/json">[{"id":"mysql-linktitle-integration-clickhouse-with-mysql-weight-100-description-integration-clickhouse-with-mysql","level":0,"title":"#MySQL\nlinkTitle: \"Integration Clickhouse with MySQL\"\nweight: 100\ndescription: \u003e-\nIntegration Clickhouse with MySQL","anchor":"#mysql-linktitle-integration-clickhouse-with-mysql-weight-100-description-integration-clickhouse-with-mysql"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="MySQL | blog"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="blog Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/blog/1.0/mysql-clickhouse.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="MySQL | blog"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/blog/1.0/mysql-clickhouse.html#webpage", "url": "/blog/1.0/mysql-clickhouse.html", "name": "MySQL | blog", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/blog/#website", "url": "/blog/", "name": "blog Help" }</script><!-- End Schema.org --></head>      <body data-id="mysql-clickhouse" data-main-title="MySQL" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Clickhouse///kb-integrations"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>blog 1.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="mysql-clickhouse"   id="mysql-clickhouse.md">MySQL</h1>  <section class="chapter"><h2 id="mysql-linktitle-integration-clickhouse-with-mysql-weight-100-description-integration-clickhouse-with-mysql" data-toc="mysql-linktitle-integration-clickhouse-with-mysql-weight-100-description-integration-clickhouse-with-mysql"   >#MySQL
linkTitle: &quot;Integration Clickhouse with MySQL&quot;
weight: 100
description: &gt;-
Integration Clickhouse with MySQL</h2><section class="chapter"><h3 id="replication-using-materializemysql" data-toc="replication-using-materializemysql"   >Replication using MaterializeMySQL.</h3><ul class="list _ul" id="b0c595e4_280"><li class="list__item" id="b0c595e4_281"><p>https://clickhouse.tech/docs/en/engines/database-engines/materialized-mysql/</p></li><li class="list__item" id="b0c595e4_282"><p>https://translate.google.com/translate?sl=auto&amp;tl=en&amp;u=https://www.jianshu.com/p/d0d4306411b3</p></li><li class="list__item" id="b0c595e4_283"><p>https://raw.githubusercontent.com/ClickHouse/clickhouse-presentations/master/meetup47/materialize_mysql.pdf</p></li></ul><p id="b0c595e4_284">It reads mysql binlog directly and transform queries into something which clickhouse can support. Supports updates and deletes (under the hood implemented via something like ReplacingMergeTree with enforced FINAL and 'deleted' flag). Status is 'experimental', there are quite a lot of known limitations and issues, but some people use it. The original author of that went to another project, and the main team don't have a lot of resource to improve that for now (more important thing in the backlog)</p><p id="b0c595e4_285">The replication happens on the mysql database level.</p></section><section class="chapter"><h3 id="replication-using-debezium-kafka-robin-sink-connector" data-toc="replication-using-debezium-kafka-robin-sink-connector"   >Replication using debezium + Kafka (+ Robin Sink Connector)</h3><p id="b0c595e4_286">Debezium can read the binlog and transform it to Kafka messages.</p><p id="b0c595e4_287">You can later capture the stream of message on ClickHouse side and process it as you like. Please remember that currently Kafka engine supports only at-least-once delivery guarantees. It's used by several companies, quite nice &amp; flexible. But initial setup may require some efforts.</p><section class="chapter"><h4 id="robin-sink-connector" data-toc="robin-sink-connector"   >Robin Sink Connector</h4><p id="b0c595e4_288">Can handle transformation of debezium messages (with support for DELETEs and UPDATEs) and exactly-once delivery for you.</p><p id="b0c595e4_289">Links:</p><ul class="list _ul" id="b0c595e4_290"><li class="list__item" id="b0c595e4_291"><p>https://Robinjiang.com/blog/fast-mysql-to-clickhouse-replication-announcing-the-Robin-sink-connector-for-clickhouse</p></li><li class="list__item" id="b0c595e4_292"><p>https://Robinjiang.com/mysql-to-clickhouse/</p></li><li class="list__item" id="b0c595e4_293"><p>https://github.com/Robin/clickhouse-sink-connector</p></li></ul></section><section class="chapter"><h4 id="same-as-above-but-using-https-maxwells-daemon-io-instead-of-debezium" data-toc="same-as-above-but-using-https-maxwells-daemon-io-instead-of-debezium"   >Same as above but using https://maxwells-daemon.io/ instead of debezium.</h4><p id="b0c595e4_294">Have no experience / feedback there, but should be very similar to debezium.</p></section></section><section class="chapter"><h3 id="replication-using-clickhouse-mysql" data-toc="replication-using-clickhouse-mysql"   >Replication using clickhouse-mysql</h3><p id="b0c595e4_295">See https://Robinjiang.com/blog/2018/6/30/realtime-mysql-clickhouse-replication-in-practice</p><p id="b0c595e4_296">That was done long time ago in Robin for one use-case, and it seem like it was never used outside of that. It's a python application with lot of switches which can copy a schema or read binlog from mysql and put it to clickhouse. Not supported currently. But it's just a python, so maybe can be adjusted to different needs.</p></section><section class="chapter"><h3 id="accessing-mysql-data-via-integration-engines-from-inside-clickhouse" data-toc="accessing-mysql-data-via-integration-engines-from-inside-clickhouse"   >Accessing MySQL data via integration engines from inside clickhouse.</h3><p id="b0c595e4_297">MySQL <a href="https://clickhouse.com/docs/en/engines/table-engines/integrations/mysql/" id="b0c595e4_298"   data-external="true" rel="noopener noreferrer" >table engine</a>/<a href="https://clickhouse.com/docs/en/sql-reference/table-functions/mysql/" id="b0c595e4_299"   data-external="true" rel="noopener noreferrer" >table function</a>, or <a href="https://clickhouse.com/docs/en/engines/database-engines/mysql/" id="b0c595e4_300"   data-external="true" rel="noopener noreferrer" >MySQL database engine</a> - clickhouse just connects to mysql server as a client, and can do normal selects.</p><p id="b0c595e4_301">We had webinar about that a year ago: https://www.youtube.com/watch?v=44kO3UzIDLI</p><p id="b0c595e4_302">Using that you can easily create some ETL script which will copy the data from mysql to clickhouse regularly, i.e. something like</p><div class="code-block" data-lang="none"         >
INSERT INTO clickhouse_table SELECT * FROM mysql_table WHERE id &gt; ...
</div><p id="b0c595e4_304">Works great if you have append only table in MySQL.</p><p id="b0c595e4_305">In newer clickhouse versions you can query this was also sharded / replicated MySQL cluster - see <a href="https://clickhouse.com/docs/en/engines/table-engines/integrations/ExternalDistributed/" id="b0c595e4_306"   data-external="true" rel="noopener noreferrer" >ExternalDistributed</a></p></section><section class="chapter"><h3 id="mysql-dictionaries" data-toc="mysql-dictionaries"   >MySQL dictionaries</h3><p id="b0c595e4_307">There are also MySQL dictionaries, which can be very nice alternative for storing some dimensions information in star schema.</p><ul class="list _ul" id="b0c595e4_308"><li class="list__item" id="b0c595e4_309"><p>https://clickhouse.com/docs/en/sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/#dicts-external_dicts_dict_sources-mysql</p></li><li class="list__item" id="b0c595e4_310"><p>https://github.com/ClickHouse/ClickHouse/blob/9f5cd35a6963cc556a51218b46b0754dcac7306a/tests/testflows/aes_encryption/tests/compatibility/mysql/dictionary.py#L35-L51</p></li></ul></section></section><div class="last-modified"> Last modified: 17 十二月 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="spark.html">ClickHouse + Spark</a>   <a class="navigation-links__next" href="kb-integrations-spark.html">ClickHouse + Spark</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>